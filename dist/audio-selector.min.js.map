{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///audio-selector.min.js","webpack:///webpack/bootstrap acdb46b6f09f29da79d6","webpack:///./index.js","webpack:///./src/main.js","webpack:///external {\"amd\":\"clappr\",\"commonjs\":\"clappr\",\"commonjs2\":\"clappr\",\"root\":\"Clappr\"}","webpack:///./src/public/level-selector.html","webpack:///./src/public/style.scss","webpack:///./~/css-loader/lib/css-base.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getter","get","parent","getPrototypeOf","_clappr","_publicLevelSelectorHtml","_publicLevelSelectorHtml2","_publicStyleScss","_publicStyleScss2","LevelSelector","_UICorePlugin","apply","arguments","listenTo","core","Events","CORE_READY","bindPlaybackEvents","mediaControl","MEDIACONTROL_CONTAINERCHANGED","reload","MEDIACONTROL_RENDERED","render","MEDIACONTROL_HIDE","hideContextMenu","stopListening","getCurrentPlayback","PLAYBACK_LEVELS_AVAILABLE","PLAYBACK_LEVEL_SWITCH_START","PLAYBACK_LEVEL_SWITCH_END","PLAYBACK_BITRATE","currentPlayback","PLAYBACK_PLAY","onPlay","unBindEvents","bindEvents","getCurrentContainer","hls","_hls","hasMultipleTracks","tracks","shouldRender","style","Styler","getStyleFor","baseUrl","options","$el","html","template","title","getTitle","append","$","el","highlightCurrentTrack","fillTracks","audioTracks","rusTrackIndex","getRusTrackIndex","current","audioTrack","event","parseInt","dataset","audioSelectorSelect","toggleContextMenu","stopPropagation","hide","toggle","isNaN","audioSelectorConfig","lang","getLangFromTrackName","name","buttonElement","text","trackElement","removeClass","addClass","updateText","index","trackLang","toLowerCase","trackName","split","replace","class","data-audio-selector","click [data-audio-selector-select]","click [data-audio-selector-button]","VERSION","UICorePlugin","push","list","toString","result","item","join","mediaQuery","alreadyImportedModules"],"mappings":"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","file":"audio-selector.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"clappr\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"clappr\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AudioSelector\"] = factory(require(\"clappr\"));\n\telse\n\t\troot[\"AudioSelector\"] = factory(root[\"Clappr\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"clappr\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"clappr\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AudioSelector\"] = factory(require(\"clappr\"));\n\telse\n\t\troot[\"AudioSelector\"] = factory(root[\"Clappr\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"<%=baseUrl%>/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!******************!*\\\n  !*** ./index.js ***!\n  \\******************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports['default'] = __webpack_require__(/*! ./src/main.js */ 1);module.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/*!*********************!*\\\n  !*** ./src/main.js ***!\n  \\*********************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if('value' in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function: while(_again) {var object=_x,property=_x2,receiver=_x3;_again = false;if(object === null)object = Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc === undefined){var parent=Object.getPrototypeOf(object);if(parent === null){return undefined;}else {_x = parent;_x2 = property;_x3 = receiver;_again = true;desc = parent = undefined;continue _function;}}else if('value' in desc){return desc.value;}else {var getter=desc.get;if(getter === undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{'default':obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}function _inherits(subClass,superClass){if(typeof superClass !== 'function' && superClass !== null){throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__ = superClass;}var _clappr=__webpack_require__(/*! clappr */ 2);var _publicLevelSelectorHtml=__webpack_require__(/*! ./public/level-selector.html */ 3);var _publicLevelSelectorHtml2=_interopRequireDefault(_publicLevelSelectorHtml);var _publicStyleScss=__webpack_require__(/*! ./public/style.scss */ 4);var _publicStyleScss2=_interopRequireDefault(_publicStyleScss);var AUTO=-1;var LevelSelector=(function(_UICorePlugin){_inherits(LevelSelector,_UICorePlugin);function LevelSelector(){_classCallCheck(this,LevelSelector);_get(Object.getPrototypeOf(LevelSelector.prototype),'constructor',this).apply(this,arguments);}_createClass(LevelSelector,[{key:'bindEvents',value:function bindEvents(){this.listenTo(this.core,_clappr.Events.CORE_READY,this.bindPlaybackEvents);this.listenTo(this.core.mediaControl,_clappr.Events.MEDIACONTROL_CONTAINERCHANGED,this.reload);this.listenTo(this.core.mediaControl,_clappr.Events.MEDIACONTROL_RENDERED,this.render);this.listenTo(this.core.mediaControl,_clappr.Events.MEDIACONTROL_HIDE,this.hideContextMenu);}},{key:'unBindEvents',value:function unBindEvents(){this.stopListening(this.core,_clappr.Events.CORE_READY);this.stopListening(this.core.mediaControl,_clappr.Events.MEDIACONTROL_CONTAINERCHANGED);this.stopListening(this.core.mediaControl,_clappr.Events.MEDIACONTROL_RENDERED);this.stopListening(this.core.mediaControl,_clappr.Events.MEDIACONTROL_HIDE);this.stopListening(this.core.getCurrentPlayback(),_clappr.Events.PLAYBACK_LEVELS_AVAILABLE);this.stopListening(this.core.getCurrentPlayback(),_clappr.Events.PLAYBACK_LEVEL_SWITCH_START);this.stopListening(this.core.getCurrentPlayback(),_clappr.Events.PLAYBACK_LEVEL_SWITCH_END);this.stopListening(this.core.getCurrentPlayback(),_clappr.Events.PLAYBACK_BITRATE);}},{key:'bindPlaybackEvents',value:function bindPlaybackEvents(){var currentPlayback=this.core.getCurrentPlayback();this.listenTo(currentPlayback,_clappr.Events.PLAYBACK_PLAY,this.onPlay);}},{key:'reload',value:function reload(){this.unBindEvents();this.bindEvents();this.bindPlaybackEvents();}},{key:'shouldRender',value:function shouldRender(){if(!this.core.getCurrentContainer())return false;var currentPlayback=this.core.getCurrentPlayback();if(!currentPlayback)return false;var hls=currentPlayback._hls;if(!hls)return false; // Only care if we have at least 2 to choose from\n\tvar hasMultipleTracks=!!(this.tracks && this.tracks.length > 1);return hasMultipleTracks;}},{key:'render',value:function render(){if(this.shouldRender()){var style=_clappr.Styler.getStyleFor(_publicStyleScss2['default'],{baseUrl:this.core.options.baseUrl});this.$el.html(this.template({'tracks':this.tracks,'title':this.getTitle()}));this.$el.append(style);this.core.mediaControl.$('.media-control-right-panel').append(this.el);this.highlightCurrentTrack();}return this;}},{key:'onPlay',value:function onPlay(){this.fillTracks();this.render();}},{key:'fillTracks',value:function fillTracks(){var hls=this.core.getCurrentPlayback()._hls;if(hls){this.tracks = hls.audioTracks;var rusTrackIndex=this.getRusTrackIndex();this.current = rusTrackIndex || 0;hls.audioTrack = this.current;}}},{key:'onTrackSelect',value:function onTrackSelect(event){var hls=this.core.getCurrentPlayback()._hls;if(!hls)return;this.current = parseInt(event.target.dataset.audioSelectorSelect,10);hls.audioTrack = this.current;this.toggleContextMenu();this.highlightCurrentTrack();event.stopPropagation();return false;}},{key:'onButtonClick',value:function onButtonClick(event){this.toggleContextMenu();}},{key:'hideContextMenu',value:function hideContextMenu(){this.$('.audio_selector ul').hide();}},{key:'toggleContextMenu',value:function toggleContextMenu(){this.$('.audio_selector ul').toggle();}},{key:'buttonElement',value:function buttonElement(){return this.$('.audio_selector button');}},{key:'trackElement',value:function trackElement(id){return this.$('.audio_selector ul a' + (!isNaN(id)?'[data-audio-selector-select=\"' + id + '\"]':'')).parent();}},{key:'getTitle',value:function getTitle(){return (this.core.options.audioSelectorConfig || {}).title;}},{key:'updateText',value:function updateText(){if(this.current != null && this.tracks[this.current]){var lang=this.getLangFromTrackName(this.tracks[this.current].name);this.buttonElement().text(lang || this.tracks[this.current].lang);}}},{key:'highlightCurrentTrack',value:function highlightCurrentTrack(){this.trackElement().removeClass('current');this.current && this.trackElement(this.current).addClass('current');this.updateText();}},{key:'getRusTrackIndex',value:function getRusTrackIndex(){var index;for(var i=0;i < this.tracks.length;i++) {if(!this.tracks[i].lang){continue;}var trackLang=this.tracks[i].lang.toLowerCase();if(trackLang === 'rus' || trackLang === 'ru' || trackLang === 'russian'){index = i;}}return index;}},{key:'getLangFromTrackName',value:function getLangFromTrackName(trackName){var lang=trackName.split(' ')[0];if(!lang){return '';}lang = lang.replace('\"','');return lang;}},{key:'name',get:function get(){return 'audio_selector';}},{key:'template',get:function get(){return (0,_clappr.template)(_publicLevelSelectorHtml2['default']);}},{key:'attributes',get:function get(){return {'class':this.name,'data-audio-selector':''};}},{key:'events',get:function get(){return {'click [data-audio-selector-select]':'onTrackSelect','click [data-audio-selector-button]':'onButtonClick'};}}],[{key:'version',get:function get(){return VERSION;}}]);return LevelSelector;})(_clappr.UICorePlugin);exports['default'] = LevelSelector;module.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/*!******************************************************************************************!*\\\n  !*** external {\"amd\":\"clappr\",\"commonjs\":\"clappr\",\"commonjs2\":\"clappr\",\"root\":\"Clappr\"} ***!\n  \\******************************************************************************************/\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/*!****************************************!*\\\n  !*** ./src/public/level-selector.html ***!\n  \\****************************************/\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<button data-audio-selector-button></button>\\n<ul>\\n  <% var langList = []; %>\\n\\n  <% for (var i = 0; i < tracks.length; i++) { %>    \\n\\n    <% var track = tracks[i]; %>\\n    <% var lang = track.name.split(' ')[0]; %> \\n    <% lang = lang ? lang.replace('\\\"', '') : ''; %> \\n    \\n    <% if (track && lang && !langList.includes(lang) ) { %>  \\n      <% langList.push(lang); %>\\n      <li>\\n        <a href=\\\"#\\\" data-audio-selector-select=\\\"<%= i %>\\\">\\n          <%= lang %>\\n        </a>\\n      </li>  \\n    <% }; %>\\n    \\n  <% }; %>\\n\\n</ul>\\n\";\n\n/***/ }),\n/* 4 */\n/*!*******************************!*\\\n  !*** ./src/public/style.scss ***!\n  \\*******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(/*! ../../~/css-loader/lib/css-base.js */ 5)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".audio_selector[data-audio-selector]{float:right;margin-top:5px;position:relative}.audio_selector[data-audio-selector] button{outline:none;background-color:transparent;color:#fff;font-family:Roboto,Open Sans,Arial,sans-serif;-webkit-font-smoothing:antialiased;border:none;font-size:11px}.audio_selector[data-audio-selector] button:hover{color:#c9c9c9}.audio_selector[data-audio-selector] button.changing{-webkit-animation:pulse .5s infinite alternate}.audio_selector[data-audio-selector]>ul{list-style-type:none;position:absolute;bottom:35px;border:1px solid #000;display:none;background-color:rgba(0,0,0,.9)}.audio_selector[data-audio-selector] li{padding:1px;font-size:11px}.audio_selector[data-audio-selector] li[data-title]{background-color:#c3c2c2;padding:5px}.audio_selector[data-audio-selector] li a{color:#666;padding:3px 15px;display:block;text-decoration:none;white-space:nowrap}.audio_selector[data-audio-selector] li a:hover{background-color:#555;color:#fff}.audio_selector[data-audio-selector] li a:hover a{color:#fff;text-decoration:none}.audio_selector[data-audio-selector] li.current a{color:#fff}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ }),\n/* 5 */\n/*!**************************************!*\\\n  !*** ./~/css-loader/lib/css-base.js ***!\n  \\**************************************/\n/***/ (function(module, exports) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\t// css base code, injected by the css-loader\r\n\tmodule.exports = function() {\r\n\t\tvar list = [];\r\n\t\r\n\t\t// return the list of modules as css string\r\n\t\tlist.toString = function toString() {\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar item = this[i];\r\n\t\t\t\tif(item[2]) {\r\n\t\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push(item[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result.join(\"\");\r\n\t\t};\r\n\t\r\n\t\t// import a list of modules into the list\r\n\t\tlist.i = function(modules, mediaQuery) {\r\n\t\t\tif(typeof modules === \"string\")\r\n\t\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\t\tvar alreadyImportedModules = {};\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar id = this[i][0];\r\n\t\t\t\tif(typeof id === \"number\")\r\n\t\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t\t}\r\n\t\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\t\tvar item = modules[i];\r\n\t\t\t\t// skip already imported module\r\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn list;\r\n\t};\r\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// audio-selector.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"<%=baseUrl%>/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap acdb46b6f09f29da79d6","export default require('./src/main.js')\n\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import {Events, Styler, UICorePlugin, template} from 'clappr'\nimport pluginHtml from './public/level-selector.html'\nimport pluginStyle from './public/style.scss'\n\nconst AUTO = -1\n\nexport default class LevelSelector extends UICorePlugin {\n\n  static get version() { return VERSION }\n\n  get name() { return 'audio_selector' }\n  get template() { return template(pluginHtml) }\n\n  get attributes() {\n    return {\n      'class': this.name,\n      'data-audio-selector': ''\n    }\n  }\n\n  get events() {\n    return {\n      'click [data-audio-selector-select]': 'onTrackSelect',\n      'click [data-audio-selector-button]': 'onButtonClick'\n    }\n  }\n\n  bindEvents() {\n    this.listenTo(this.core, Events.CORE_READY, this.bindPlaybackEvents)\n    this.listenTo(this.core.mediaControl, Events.MEDIACONTROL_CONTAINERCHANGED, this.reload)\n    this.listenTo(this.core.mediaControl, Events.MEDIACONTROL_RENDERED, this.render)\n    this.listenTo(this.core.mediaControl, Events.MEDIACONTROL_HIDE, this.hideContextMenu)\n  }\n\n  unBindEvents() {\n    this.stopListening(this.core, Events.CORE_READY)\n    this.stopListening(this.core.mediaControl, Events.MEDIACONTROL_CONTAINERCHANGED)\n    this.stopListening(this.core.mediaControl, Events.MEDIACONTROL_RENDERED)\n    this.stopListening(this.core.mediaControl, Events.MEDIACONTROL_HIDE)\n    this.stopListening(this.core.getCurrentPlayback(), Events.PLAYBACK_LEVELS_AVAILABLE)\n    this.stopListening(this.core.getCurrentPlayback(), Events.PLAYBACK_LEVEL_SWITCH_START)\n    this.stopListening(this.core.getCurrentPlayback(), Events.PLAYBACK_LEVEL_SWITCH_END)\n    this.stopListening(this.core.getCurrentPlayback(), Events.PLAYBACK_BITRATE)\n  }\n\n  bindPlaybackEvents() {\n    var currentPlayback = this.core.getCurrentPlayback()\n    this.listenTo(currentPlayback, Events.PLAYBACK_PLAY, this.onPlay)\n  }\n\n  reload() {\n    this.unBindEvents()\n    this.bindEvents()\n    this.bindPlaybackEvents()\n  }\n\n  shouldRender() {\n    if (!this.core.getCurrentContainer()) return false\n\n    var currentPlayback = this.core.getCurrentPlayback()\n    if (!currentPlayback) return false\n\n    var hls = currentPlayback._hls\n    if (!hls) return false\n\n    // Only care if we have at least 2 to choose from\n    var hasMultipleTracks = !!(this.tracks && this.tracks.length > 1)\n\n    return hasMultipleTracks\n  }\n\n  render() {\n    if (this.shouldRender()) {\n      var style = Styler.getStyleFor(pluginStyle, {baseUrl: this.core.options.baseUrl})\n\n      this.$el.html(this.template({ \n        'tracks': this.tracks, \n        'title': this.getTitle()\n      }))\n      this.$el.append(style)\n      this.core.mediaControl.$('.media-control-right-panel').append(this.el)\n      this.highlightCurrentTrack()\n    }\n    return this\n  }\n\n  onPlay() {\n    this.fillTracks();\n    this.render();\n  }\n\n  fillTracks() {\n    var hls = this.core.getCurrentPlayback()._hls\n    if (hls) {\n      this.tracks = hls.audioTracks; \n\n      var rusTrackIndex = this.getRusTrackIndex()\n      this.current = rusTrackIndex || 0;\n\n      hls.audioTrack = this.current; \n    }\n  }\n\n  onTrackSelect(event) {\n    var hls = this.core.getCurrentPlayback()._hls\n    if (!hls) return\n\n    this.current = parseInt(event.target.dataset.audioSelectorSelect, 10)\n    hls.audioTrack = this.current\n\n    this.toggleContextMenu()\n    this.highlightCurrentTrack()\n\n    event.stopPropagation()\n    return false\n  }\n\n  onButtonClick(event) { this.toggleContextMenu() }\n\n  hideContextMenu() { this.$('.audio_selector ul').hide() }\n\n  toggleContextMenu() { this.$('.audio_selector ul').toggle() }\n\n  buttonElement() { return this.$('.audio_selector button') }\n\n  trackElement(id) { return this.$('.audio_selector ul a'+(!isNaN(id) ? '[data-audio-selector-select=\"'+id+'\"]' : '')).parent() }\n\n  getTitle() { return (this.core.options.audioSelectorConfig || {}).title }\n\n  updateText() {\n    if (this.current != null && this.tracks[this.current]) {\n      var lang = this.getLangFromTrackName(this.tracks[this.current].name)\n      this.buttonElement().text(lang || this.tracks[this.current].lang);\n    }\n  }\n\n  highlightCurrentTrack() {\n    this.trackElement().removeClass('current')\n    this.current && this.trackElement(this.current).addClass('current')\n    this.updateText()\n  }\n\n  getRusTrackIndex() {\n    var index;\n    for (var i = 0; i < this.tracks.length; i++) {\n      if (!this.tracks[i].lang) { continue; }\n      var trackLang = this.tracks[i].lang.toLowerCase()\n      if (trackLang === 'rus' || trackLang === 'ru' || trackLang === 'russian') { \n        index = i\n      }\n    }\n    return index;\n  }\n\n  getLangFromTrackName(trackName) {\n    var lang = trackName.split(' ')[0]\n    if (!lang) { return ''; }\n\n    lang = lang.replace('\"', '')\n    return lang;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"amd\":\"clappr\",\"commonjs\":\"clappr\",\"commonjs2\":\"clappr\",\"root\":\"Clappr\"}\n// module id = 2\n// module chunks = 0","module.exports = \"<button data-audio-selector-button></button>\\n<ul>\\n  <% var langList = []; %>\\n\\n  <% for (var i = 0; i < tracks.length; i++) { %>    \\n\\n    <% var track = tracks[i]; %>\\n    <% var lang = track.name.split(' ')[0]; %> \\n    <% lang = lang ? lang.replace('\\\"', '') : ''; %> \\n    \\n    <% if (track && lang && !langList.includes(lang) ) { %>  \\n      <% langList.push(lang); %>\\n      <li>\\n        <a href=\\\"#\\\" data-audio-selector-select=\\\"<%= i %>\\\">\\n          <%= lang %>\\n        </a>\\n      </li>  \\n    <% }; %>\\n    \\n  <% }; %>\\n\\n</ul>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/level-selector.html\n// module id = 3\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".audio_selector[data-audio-selector]{float:right;margin-top:5px;position:relative}.audio_selector[data-audio-selector] button{outline:none;background-color:transparent;color:#fff;font-family:Roboto,Open Sans,Arial,sans-serif;-webkit-font-smoothing:antialiased;border:none;font-size:11px}.audio_selector[data-audio-selector] button:hover{color:#c9c9c9}.audio_selector[data-audio-selector] button.changing{-webkit-animation:pulse .5s infinite alternate}.audio_selector[data-audio-selector]>ul{list-style-type:none;position:absolute;bottom:35px;border:1px solid #000;display:none;background-color:rgba(0,0,0,.9)}.audio_selector[data-audio-selector] li{padding:1px;font-size:11px}.audio_selector[data-audio-selector] li[data-title]{background-color:#c3c2c2;padding:5px}.audio_selector[data-audio-selector] li a{color:#666;padding:3px 15px;display:block;text-decoration:none;white-space:nowrap}.audio_selector[data-audio-selector] li a:hover{background-color:#555;color:#fff}.audio_selector[data-audio-selector] li a:hover a{color:#fff;text-decoration:none}.audio_selector[data-audio-selector] li.current a{color:#fff}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/style.scss\n// module id = 4\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}